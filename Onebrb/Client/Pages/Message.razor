@page "/message"
@page "/message/{recipient}"
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@using Onebrb.Shared.ViewModels.Message
@using System.Net.Http
@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration
@inject HttpClient Http

@attribute [Authorize]

@if (string.IsNullOrWhiteSpace(Recipient))
{
    // Show all messages
    <MessagesListComponent></MessagesListComponent>
}
else
{
    // New message form
    <MessageForm Recipient="@Recipient"></MessageForm>
}

@code {
    [Parameter]
    public string Recipient { get; set; }

    protected override void OnInitialized()
    {
        Recipient = Recipient ?? string.Empty;
    }

    protected async Task<List<MessageViewModel>> GetAllMessagesAsync()
    {
        var response = Http.GetAsync(Configuration.)
    }
}
