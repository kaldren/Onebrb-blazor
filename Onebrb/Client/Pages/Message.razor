@page "/message"
@page "/message/{recipient}"
@using Microsoft.AspNetCore.Authorization
@using Onebrb.Shared.ViewModels.Message
@using System.Net.Http
@using Microsoft.AspNetCore.Components.WebAssembly.Hosting
@inject IWebAssemblyHostEnvironment HostEnvironment
@inject HttpClient Http

@attribute [Authorize]

@if (string.IsNullOrWhiteSpace(Recipient))
{
    // Show all messages
    <MessagesListComponent></MessagesListComponent>
}
else
{
    // New message form
    <MessageForm Recipient="@Recipient"></MessageForm>
}

@code {
    [Parameter]
    public string Recipient { get; set; }

    protected override void OnInitialized()
    {
        Recipient = Recipient ?? string.Empty;
    }

}
